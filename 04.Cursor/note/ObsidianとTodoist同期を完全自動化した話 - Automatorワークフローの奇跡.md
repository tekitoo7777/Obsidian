---
tags:
  - "#AI"
  - "#教育"
  - "#Cursor"
  - "#Obsidian"
  - "#Todoist"
  - "#タスク管理"
  - "#自動化"
  - "#Automator"
  - "#macOS"
  - "#productivity-tools"
published: 2025-01-14
---

# 【完全解決】ObsidianとTodoistの同期が不安定で困ってる人へ - 同期成功率100%を実現した方法

## 毎朝「また同期されてない...」で始まる憂鬱な朝から解放された話

こんにちは！現役教師でAI活用を研究しているテキトー教師です。

毎朝6時50分。起床して最初にすることは...

「また同期されてない。なんで？」

この2週間前まで、私の朝はいつもこんな風に始まっていました。

以前の記事「[自分のタスク管理をNotionからCursor、Obsidian、Todoistに変更した話](../05.Output/note/自分のタスク管理をNotionからCursor,Obsidian,Todoistに変更した話.md)」で、新しいタスク管理システムを構築したものの、**「自動同期が不安定」**という致命的な問題を抱えていました。

でも、今は違います。

**同期成功率100%を2週間継続中！**

しかも、使ったのはmacOSに最初から入っている機能だけです。

「どうやって？」

その答えは、意外にも**Automatorワークフロー + Calendarアプリ**の組み合わせにありました。

## なぜ私がタスク管理の自動化にこだわるのか

教育現場で働く私にとって、タスク管理は生命線です。

- **授業準備**（教材作成、資料印刷、機材準備）
- **生徒対応**（面談、進路相談、保護者連絡）
- **校務分掌**（会議、委員会、行事運営）
- **個人研究**（AI活用、教材開発、論文執筆）

これらすべてを効率的に管理しないと、本来やりたい「生徒のための時間」が削られてしまいます。

実際に使ってみて分かったことは、**どんなに素晴らしいシステムでも、動いたり動かなかったりでは意味がない**ということでした。

## 失敗の連続：「正しい」はずの自動化が動かない理由

### 1ヶ月間の試行錯誤で学んだこと

**【失敗1】cronジョブアプローチ（失敗率: 約30%）**

最初に試したのは、Linux系でおなじみのcronジョブでした。

```bash
# こんな感じで設定したんですが...
0 7,12,19 * * * /Users/tekitoo/sync_script.sh
```

**何が起こったか:**
- 平日の朝はほぼ100%失敗
- macOSのスリープ復帰時にタイミングが合わない
- 週末は動くのに、なぜか月曜日だけ動かない謎

**【失敗2】LaunchAgentアプローチ（失敗率: 約20%）**

「macOSならLaunchAgentでしょ」と思って、Apple公式の方法を試しました。

```xml
<!-- com.obsidian.todoist.sync.plist -->
<key>StartCalendarInterval</key>
<array>
    <dict>
        <key>Hour</key>
        <integer>7</integer>
        <key>Minute</key>
        <integer>0</integer>
    </dict>
</array>
```

**何が起こったか:**
- 最初の1週間は完璧
- 突然動かなくなる（原因不明）
- ログを見ても「Permission denied」や「Path not found」

**【失敗3】常駐プロセスアプローチ（失敗率: 約40%）**

「リアルタイム監視なら確実でしょ」と思って、Pythonで常駐プロセスを作りました。

**何が起こったか:**
- 2-3日でメモリリークが発生
- バックグラウンドで動いてるのかわからない
- Macを再起動すると当然停止

### なぜ「正しい」方法が機能しないのか？

実際に使ってみて分かったことは、**macOSには「macOSらしい」自動化の方法がある**ということでした。

上記の方法は技術的には正しいんです。でも、日常使いには向いていません。

- **ユーザーがログインしていない時間**の処理が不安定
- **システムの状態変化**（スリープ、復帰、再起動）への対応が脆弱
- **エラー時の通知**や復旧手段がない

「技術的に正しい ≠ 実用的」という現実を思い知らされました。

## ターニングポイント：Automatorワークフローとの出会い

失敗続きで諦めかけていた時、ふと**Automator**のことを思い出しました。

「あれ？そういえば、macOSに最初から入ってるAutomatorって、こういう時に使えるんじゃない？」

実は今まで**Automatorは「難しそう」**というイメージがあって避けてたんですよね。でも、よく考えてみると、Apple純正ツールなら権限周りの問題も少ないはず...

そして、実際に試してみた結果が、この**同期成功率100%**でした！

## 完璧な自動化システムの具体的な構築手順

ここからは、実際にどうやって設定したかを詳しく説明します。

### ステップ1: Automatorワークフローの作成

**1. Automatorを起動**
- Finder → アプリケーション → Automator を起動
- 「新規書類」→ 「アプリケーション」を選択

**2. シェルスクリプトアクションを追加**
- 左側のライブラリから「ユーティリティ」を選択
- 「シェルスクリプトを実行」をワークフローエリアにドラッグ

**3. スクリプト内容を設定**

```bash
#!/bin/bash

# 環境変数設定（重要！）
export TODOIST_API_TOKEN="your_actual_token_here"
export PATH="/usr/local/bin:/usr/bin:/bin:/opt/homebrew/bin"

# iCloudディレクトリに移動
cd "/Users/tekitoo/Library/Mobile Documents/iCloud~md~obsidian/Documents/Vault(Icloud) 2/scripts"

# Python実行
/usr/bin/python3 flexible_sync.py

# 結果を通知で表示
if [ $? -eq 0 ]; then
    osascript -e 'display notification "ObsidianとTodoistの同期が完了しました✅" with title "同期成功" sound name "Glass"'
else
    osascript -e 'display notification "同期処理でエラーが発生しました❌ ログを確認してください" with title "同期失敗" sound name "Basso"'
fi
```

**4. アプリケーションとして保存**
- ファイル → 保存
- 名前: `Obsidian-Todoist同期`
- 場所: デスクトップ（後で移動可能）

### ステップ2: Calendarアプリでの定期実行設定

**1. カレンダーアプリを起動**

**2. 新規イベントを作成（朝の同期用）**
- タイトル: `朝の同期`
- 日時: 毎日 7:00
- 繰り返し: 毎日

**3. アラート設定**
- イベント時刻にアラート
- カスタム → ファイルを開く
- 先ほど作成した `Obsidian-Todoist同期.app` を選択

**4. 同様に昼と夜の同期も設定**
- 昼の同期: 12:00
- 夜の同期: 19:00

### ステップ3: 動作確認

**1. 手動テスト**
- 作成したAutomatorアプリをダブルクリック
- 通知が表示されることを確認
- Obsidianで同期結果を確認

**2. カレンダー連携テスト**
- テスト用に5分後のイベントを作成
- 自動実行されることを確認

## 実際の運用結果：数字で見る劇的な改善

### Before（従来の方法）

| 指標 | 結果 |
|------|------|
| 同期成功率 | 約70% |
| 朝の準備時間 | 平均15分 |
| ストレス度 | 高（毎朝不安） |
| 手動対応頻度 | 週3-4回 |

### After（Automatorワークフロー）

| 指標 | 結果 |
|------|------|
| 同期成功率 | **100%** |
| 朝の準備時間 | 平均5分 |
| ストレス度 | 低（安心） |
| 手動対応頻度 | 0回 |

**運用データ（2週間）:**
- 総実行回数: 42回
- 成功回数: 42回
- 失敗回数: 0回

## 教育現場での活用メリット：時間と心の余裕が生まれた

### 朝の時間管理が劇的に改善

**以前:**
- 6:50 起床
- 6:55 同期確認 → 失敗発覚
- 7:00 手動で同期実行 → エラー
- 7:05 Cursorで問題解決
- 7:20 やっと同期完了
- 7:25 学校へ（ギリギリ）

**現在:**
- 6:50 起床
- 6:52 同期確認 → 完了済み
- 6:55 今日のタスク確認完了
- 7:00 余裕を持って学校準備
- 7:15 学校へ（余裕あり）

### 授業準備の質が向上

時間に余裕ができたおかげで：
- **前日の振り返り**が確実にできる
- **今日の重要タスク**を朝一で把握できる
- **急な予定変更**にも柔軟に対応できる

実際に使ってみて分かったことは、**安定したシステムがあると、本来の仕事に集中できる**ということでした。

## こんな人におすすめ

この方法は特に以下のような方におすすめです：

✅ **ObsidianとTodoistの同期で困っている方**
✅ **macOSユーザーで自動化に挫折した経験がある方**
✅ **複雑な設定は避けて、シンプルに解決したい方**
✅ **朝の時間を有効活用したい方**
✅ **教育関係者や知識労働者の方**

## トラブルシューティング：よくある問題と解決法

### 問題1: Automatorアプリが実行されない

**症状:** カレンダーでアラートが鳴るが、アプリが起動しない

**解決法:**
1. システム設定 → プライバシーとセキュリティ → アプリケーション
2. Automatorの実行を許可する
3. カレンダーアプリの通知権限も確認

### 問題2: Python スクリプトでエラーが発生

**症状:** Automatorは起動するが、同期処理が失敗する

**解決法:**
1. ターミナルでPythonパスを確認: `which python3`
2. Automator内のパスを正しいものに変更
3. 環境変数（TODOIST_API_TOKEN）の設定を確認

### 問題3: iCloudディレクトリにアクセスできない

**症状:** 「Permission denied」エラーが発生

**解決法:**
1. システム設定 → プライバシーとセキュリティ → フルディスクアクセス
2. Automatorを追加して許可する

## まとめ：安定性が全て - シンプルな解決策の力

今回の経験を通して学んだ最も重要なことは、**「技術的に高度 ≠ 実用的」**だということです。

cronやLaunchAgentは確かに「正しい」方法でした。でも、日常使いにはAutomator + Calendarの組み合わせの方がはるかに実用的でした。

### この方法の本質的な優位性

1. **Apple純正ツール**なので権限問題が少ない
2. **GUI設定**なのでトラブルシューティングが簡単
3. **カレンダー連携**で視覚的に管理できる
4. **通知機能**でエラーも成功も分かりやすい

実際に使ってみて分かったことは、**安定したシステムがあると、創造性に集中できる**ということでした。

タスク管理の自動化で困っている方は、ぜひ一度試してみてください。きっと、毎朝の「また同期されてない...」から解放されますよ！

---

**次回予告：**
この安定した基盤の上に、さらに高度な自動化を構築する方法についても書く予定です。AI活用の新しい可能性を一緒に探っていきましょう！ 